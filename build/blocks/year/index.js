(()=>{"use strict";const e=window.React,t=window.wp.blocks,n=window.wp.components,l=window.wp.data,a=window.wp.coreData,r=window.wp.blockEditor;let i,o,m,c,_,u,d,s,v,p,y=null;function w(e){e=parseInt(e,10),y("postType","mve_timeline_item",m,{mve_timeline:isNaN(e)?[0]:[parseInt(e,10)]})}const E=e=>{""===e?o({...i,mve_timeline_year:null}):(e=parseInt(e,10),o({...i,mve_timeline_year:isNaN(e)?null:e.toString()}))},g=e=>{o(""===e?{...i,mve_timeline_year_name:null}:{...i,mve_timeline_year_name:e})},C=e=>{""===e?o({...i,mve_timeline_year_end:null}):(e=parseInt(e,10),o({...i,mve_timeline_year_end:isNaN(e)?null:e.toString()}))},b=e=>{o(""===e?{...i,mve_timeline_year_end_name:null}:{...i,mve_timeline_year_end_name:e})},h={backgroundColor:"red",color:"white"},S=function(){return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.__experimentalHStack,null,(0,e.createElement)(n.TextControl,{style:d?null:h,onChange:E,value:d,label:"Year start *"}),(0,e.createElement)(n.TextControl,{onChange:C,value:s,label:"Year end"})),(0,e.createElement)(n.__experimentalHStack,null,(0,e.createElement)(n.TextControl,{onChange:g,value:v,label:"Year start name"}),(0,e.createElement)(n.TextControl,{onChange:b,value:p,label:"Year end name"})),(0,e.createElement)(n.SelectControl,{style:_&&0!==_.length&&0!==_[0]?null:h,label:"Timeline *",options:u,onChange:w,value:_?_[0]:""}))};(0,t.registerBlockType)("mve-timeline/year",{edit:({setAttributes:t,attributes:w})=>{const E=(0,r.useBlockProps)(),g=(0,l.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),C=(0,l.useSelect)((e=>e("core/editor").getCurrentPostId()),[]),[b,h]=(0,a.useEntityProp)("postType",g,"meta");return function(e,t,n){var a,r,w,E;i=e,o=t,m=n;const g=(0,l.useDispatch)("core");y=g.editEntityRecord,c=(0,l.useSelect)((e=>e("core").getEntityRecords("taxonomy","mve_timeline",{orderBy:"name",order:"asc",per_page:-1}))),_=(0,l.useSelect)((e=>e("core/editor").getEditedPostAttribute("mve_timeline")),[]),u=[{value:0,label:"Choose timeline..."}].concat(c?c.map((e=>({value:e.id,label:e.name}))):[]),d=null!==(a=e.mve_timeline_year)&&void 0!==a?a:"",s=null!==(r=e.mve_timeline_year_end)&&void 0!==r?r:"",v=null!==(w=e.mve_timeline_year_name)&&void 0!==w?w:"",p=null!==(E=e.mve_timeline_year_end_name)&&void 0!==E?E:""}(b,h,C),(0,e.createElement)(n.Card,{...E},(0,e.createElement)(n.CardHeader,null,(0,e.createElement)(n.__experimentalHeading,{level:4},"Year and timeline")),(0,e.createElement)(n.CardBody,null,(0,e.createElement)(S,null)))},save:()=>null})})();