(()=>{"use strict";const e=window.React,t=window.wp.blocks,n=window.wp.components,l=window.wp.data,r=window.wp.coreData,a=window.wp.blockEditor;let i,o,m,c,s,u,d,p,_=null;function v(e){e=parseInt(e,10),_("postType","mve_timeline_item",m,{mve_timeline:isNaN(e)?[0]:[parseInt(e,10)]})}const y=e=>{""===e?o({...i,mve_timeline_year:null}):(e=parseInt(e,10),o({...i,mve_timeline_year:isNaN(e)?null:e.toString()}))},w=e=>{""===e?o({...i,mve_timeline_year_end:null}):(e=parseInt(e,10),o({...i,mve_timeline_year_end:isNaN(e)?null:e.toString()}))},g={backgroundColor:"red",color:"white"},E=function(){return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.__experimentalHStack,null,(0,e.createElement)(n.TextControl,{style:d?null:g,onChange:y,value:d,label:"Year start"}),(0,e.createElement)(n.TextControl,{onChange:w,value:p,label:"Year end"})),(0,e.createElement)(n.SelectControl,{style:s&&0!==s.length&&0!==s[0]?null:g,label:"Timeline",options:u,onChange:v,value:s?s[0]:""}))};(0,t.registerBlockType)("mve-timeline/year",{edit:({setAttributes:t,attributes:v})=>{const y=(0,a.useBlockProps)(),w=(0,l.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),g=(0,l.useSelect)((e=>e("core/editor").getCurrentPostId()),[]),[C,b]=(0,r.useEntityProp)("postType",w,"meta");return function(e,t,n){var r,a;i=e,o=t,m=n;const v=(0,l.useDispatch)("core");_=v.editEntityRecord,c=(0,l.useSelect)((e=>e("core").getEntityRecords("taxonomy","mve_timeline",{orderBy:"name",order:"asc",per_page:-1}))),s=(0,l.useSelect)((e=>e("core/editor").getEditedPostAttribute("mve_timeline")),[]),u=[{value:0,label:"Choose timeline..."}].concat(c?c.map((e=>({value:e.id,label:e.name}))):[]),d=null!==(r=e.mve_timeline_year)&&void 0!==r?r:"",p=null!==(a=e.mve_timeline_year_end)&&void 0!==a?a:""}(C,b,g),(0,e.createElement)(n.Card,{...y},(0,e.createElement)(n.CardHeader,null,(0,e.createElement)(n.__experimentalHeading,{level:4},"Year and timeline")),(0,e.createElement)(n.CardBody,null,(0,e.createElement)(E,null)))},save:()=>null})})();