(()=>{"use strict";const e=window.wp.blocks,i=window.wp.data,n=window.wp.coreData,t=window.wp.blockEditor,l=window.wp.components,a=window.ReactJSXRuntime;let s,o,r,d,m,c=null;const _=e=>{const i={...c,mve_timeline_image:e?e.id:null,mve_timeline_image_src:e?JSON.stringify(e.sizes):null};e||(i.mve_timeline_image_source=null,i.mve_timeline_image_info=null,i.mve_timeline_image_src=null),m(i)},u=e=>{m({...c,mve_timeline_image_source:e})},p=e=>{m({...c,mve_timeline_image_info:e})},g=function(){return(0,a.jsxs)(t.MediaUploadCheck,{children:[(0,a.jsx)(l.__experimentalText,{upperCase:!0,children:"Image"}),(0,a.jsx)(t.MediaUpload,{onSelect:_,allowedTypes:["image"],value:s,render:({open:e})=>(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)("div",{style:{display:"block"},children:(0,a.jsx)(l.ResponsiveWrapper,{naturalWidth:d.media_details.width,naturalHeight:d.media_details.height,children:(0,a.jsx)("img",{src:d.source_url})})}),(0,a.jsxs)("div",{style:{display:"block"},children:[!d&&(0,a.jsx)(l.Button,{variant:"secondary",onClick:e,children:"Open Media Library"}),d&&(0,a.jsx)(l.Button,{onClick:()=>_(null),isLink:!0,isDestructive:!0,children:"Remove image"})]})]})}),d&&(0,a.jsx)(l.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:o,onChange:u,label:"Source"}),d&&(0,a.jsx)(l.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:r,onChange:p,label:"Info"})]})};(0,e.registerBlockType)("mve-timeline/image",{edit:({setAttributes:e,attributes:_})=>{const u=(0,t.useBlockProps)(),p=(0,i.useSelect)(e=>e("core/editor").getCurrentPostType(),[]),[x,v]=(0,n.useEntityProp)("postType",p,"meta");return function(e,n){var t,l;c=e,m=n,s=e.mve_timeline_image,o=null!==(t=e.mve_timeline_image_source)&&void 0!==t?t:"",r=null!==(l=e.mve_timeline_image_info)&&void 0!==l?l:"",d=(0,i.useSelect)(e=>e("core").getEntityRecord("postType","attachment",s),[s])}(x,v),(0,a.jsxs)(l.Card,{...u,children:[(0,a.jsx)(l.CardHeader,{children:(0,a.jsx)(l.__experimentalHeading,{level:4,children:"Image"})}),(0,a.jsx)(l.CardBody,{children:(0,a.jsx)(g,{})})]})},save:()=>null})})();