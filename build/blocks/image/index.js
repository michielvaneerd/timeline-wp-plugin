(()=>{"use strict";const e=window.React,t=window.wp.blocks,l=window.wp.data,i=window.wp.coreData,n=window.wp.blockEditor,a=window.wp.components;(0,t.registerBlockType)("mve-timeline/image",{edit:({setAttributes:t,attributes:r})=>{var m,o;const c=(0,n.useBlockProps)(),s=(0,l.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[d,u]=(0,i.useEntityProp)("postType",s,"meta"),_=d.mve_timeline_image,v=null!==(m=d.mve_timeline_image_source)&&void 0!==m?m:"",g=null!==(o=d.mve_timeline_image_info)&&void 0!==o?o:"",p=(0,l.useSelect)((e=>e("core").getMedia(_)),[_]),w=e=>{const t={...d,mve_timeline_image:e?e.id:null,mve_timeline_image_src:e?e.url:null};e||(t.mve_timeline_image_source=null,t.mve_timeline_image_info=null,t.mve_timeline_image_src=null),u(t)};return(0,e.createElement)(a.Card,{...c},(0,e.createElement)(a.CardHeader,null,(0,e.createElement)(a.__experimentalHeading,{level:4},"Image")),(0,e.createElement)(a.CardBody,null,(0,e.createElement)(n.MediaUploadCheck,null,(0,e.createElement)(n.MediaUpload,{onSelect:w,allowedTypes:["image"],value:_,render:({open:t})=>(0,e.createElement)(e.Fragment,null,p&&(0,e.createElement)("div",{style:{display:"block"}},(0,e.createElement)(a.ResponsiveWrapper,{naturalWidth:p.media_details.width,naturalHeight:p.media_details.height},(0,e.createElement)("img",{src:p.source_url}))),(0,e.createElement)("div",{style:{display:"block"}},!p&&(0,e.createElement)(a.Button,{variant:"secondary",onClick:t},"Open Media Library"),p&&(0,e.createElement)(a.Button,{onClick:()=>w(null),isLink:!0,isDestructive:!0},"Remove image")))}),p&&(0,e.createElement)(a.TextControl,{value:v,onChange:e=>{u({...d,mve_timeline_image_source:e})},label:"Source"}),p&&(0,e.createElement)(a.TextControl,{value:g,onChange:e=>{u({...d,mve_timeline_image_info:e})},label:"Info"}))))},save:()=>null})})();