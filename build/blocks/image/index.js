(()=>{"use strict";const e=window.React,t=window.wp.blocks,l=window.wp.data,i=window.wp.coreData,n=window.wp.blockEditor,a=window.wp.components;(0,t.registerBlockType)("mve-timeline/image",{edit:({setAttributes:t,attributes:r})=>{var o,m;const c=(0,n.useBlockProps)(),d=(0,l.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[s,u]=(0,i.useEntityProp)("postType",d,"meta"),_=s.mve_timeline_image,p=null!==(o=s.mve_timeline_image_source)&&void 0!==o?o:"",v=null!==(m=s.mve_timeline_image_info)&&void 0!==m?m:"",g=(0,l.useSelect)((e=>e("core").getMedia(_)),[_]),w=e=>{const t={...s,mve_timeline_image:e?e.id:null};e||(t.mve_timeline_image_source=null,t.mve_timeline_image_info=null),u(t)};return(0,e.createElement)(a.Card,{...c},(0,e.createElement)(a.CardHeader,null,(0,e.createElement)(a.__experimentalHeading,{level:4},"Image")),(0,e.createElement)(a.CardBody,null,(0,e.createElement)(n.MediaUploadCheck,null,(0,e.createElement)(n.MediaUpload,{onSelect:w,allowedTypes:["image"],value:_,render:({open:t})=>(0,e.createElement)(e.Fragment,null,g&&(0,e.createElement)("div",{style:{display:"block"}},(0,e.createElement)(a.ResponsiveWrapper,{naturalWidth:g.media_details.width,naturalHeight:g.media_details.height},(0,e.createElement)("img",{src:g.source_url}))),(0,e.createElement)("div",{style:{display:"block"}},!g&&(0,e.createElement)(a.Button,{variant:"secondary",onClick:t},"Open Media Library"),g&&(0,e.createElement)(a.Button,{onClick:()=>w(null),isLink:!0,isDestructive:!0},"Remove image")))}),g&&(0,e.createElement)(a.TextControl,{value:p,onChange:e=>{u({...s,mve_timeline_image_source:e})},label:"Source"}),g&&(0,e.createElement)(a.TextControl,{value:v,onChange:e=>{u({...s,mve_timeline_image_info:e})},label:"Info"}))))},save:()=>null})})();