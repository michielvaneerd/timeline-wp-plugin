(()=>{"use strict";const e=window.React,t=window.wp.blocks,l=window.wp.data,n=window.wp.coreData,i=window.wp.blockEditor,a=window.wp.components;let r,m,o,c,s,u=null;const d=e=>{const t={...u,mve_timeline_image:e?e.id:null,mve_timeline_image_src:e?JSON.stringify(e.sizes):null};e||(t.mve_timeline_image_source=null,t.mve_timeline_image_info=null,t.mve_timeline_image_src=null),s(t)},_=e=>{s({...u,mve_timeline_image_source:e})},g=e=>{s({...u,mve_timeline_image_info:e})},p=function(){return(0,e.createElement)(i.MediaUploadCheck,null,(0,e.createElement)(a.__experimentalText,{upperCase:!0},"Image"),(0,e.createElement)(i.MediaUpload,{onSelect:d,allowedTypes:["image"],value:r,render:({open:t})=>(0,e.createElement)(e.Fragment,null,c&&(0,e.createElement)("div",{style:{display:"block"}},(0,e.createElement)(a.ResponsiveWrapper,{naturalWidth:c.media_details.width,naturalHeight:c.media_details.height},(0,e.createElement)("img",{src:c.source_url}))),(0,e.createElement)("div",{style:{display:"block"}},!c&&(0,e.createElement)(a.Button,{variant:"secondary",onClick:t},"Open Media Library"),c&&(0,e.createElement)(a.Button,{onClick:()=>d(null),isLink:!0,isDestructive:!0},"Remove image")))}),c&&(0,e.createElement)(a.TextControl,{value:m,onChange:_,label:"Source"}),c&&(0,e.createElement)(a.TextControl,{value:o,onChange:g,label:"Info"}))};(0,t.registerBlockType)("mve-timeline/image",{edit:({setAttributes:t,attributes:d})=>{const _=(0,i.useBlockProps)(),g=(0,l.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[v,w]=(0,n.useEntityProp)("postType",g,"meta");return function(e,t){var n,i;u=e,s=t,r=e.mve_timeline_image,m=null!==(n=e.mve_timeline_image_source)&&void 0!==n?n:"",o=null!==(i=e.mve_timeline_image_info)&&void 0!==i?i:"",c=(0,l.useSelect)((e=>e("core").getMedia(r)),[r])}(v,w),(0,e.createElement)(a.Card,{..._},(0,e.createElement)(a.CardHeader,null,(0,e.createElement)(a.__experimentalHeading,{level:4},"Image")),(0,e.createElement)(a.CardBody,null,(0,e.createElement)(p,null)))},save:()=>null})})();